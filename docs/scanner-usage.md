# Использование сканера штрихкодов

## Обзор

Приложение Storekeeper включает функциональность сканирования штрихкодов через камеру устройства.

## Структура

### Страницы

- **`/`** - Главная страница с кнопками навигации
- **`/scanner`** - Страница сканирования штрихкодов

### Компоненты

- **`BarcodeScanner`** - Компонент для работы с камерой и распознавания штрихкодов
- **`useBarcodeScanner`** - Хук для управления состоянием сканера

## Использование

### Запуск приложения

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

### Для работы с камерой через HTTPS

```bash
npm run dev:https
```

Приложение будет доступно по адресу `https://localhost:3001`

> **Примечание:** Для работы камеры в браузере требуется HTTPS соединение (кроме localhost).

## Как использовать сканер

1. Откройте главную страницу приложения
2. Нажмите кнопку "Начать сканирование"
3. Разрешите доступ к камере в браузере
4. Наведите камеру на штрихкод
5. Код будет распознан автоматически

## Поддерживаемые форматы штрихкодов

Библиотека @zxing/library поддерживает следующие форматы:

- EAN-13
- EAN-8
- UPC-A
- UPC-E
- Code 128
- Code 39
- QR Code
- Data Matrix
- И другие

## Обработка ошибок

Компонент обрабатывает следующие типы ошибок:

- **NotAllowedError** - Доступ к камере запрещен пользователем
- **NotFoundError** - Камера не найдена на устройстве
- **NotReadableError** - Камера занята другим приложением
- Другие ошибки браузера

## Состояния сканера

- **inactive** - Сканер неактивен
- **initializing** - Инициализация камеры
- **active** - Камера активна, ожидание штрихкода
- **scanning** - Обработка распознанного штрихкода
- **error** - Произошла ошибка

## Разрешения

Приложение запрашивает следующие разрешения:

- **camera** - Доступ к камере устройства

Состояния разрешений:

- **prompt** - Разрешение еще не запрошено
- **granted** - Разрешение предоставлено
- **denied** - Разрешение отклонено

## Тестирование

Для тестирования сканера используйте тестовые штрихкоды из базы данных:

- `1234567890123` - Смартфон Samsung Galaxy
- `9876543210987` - Молоко 3.2%
- `5555555555555` - Ручка шариковая синяя

Вы можете сгенерировать изображения этих штрихкодов онлайн на сайтах:
- https://barcode.tec-it.com/
- https://www.barcodesinc.com/generator/

## Мобильные устройства

Для тестирования на мобильных устройствах:

1. Убедитесь, что устройство находится в той же сети, что и компьютер разработки
2. Найдите IP-адрес вашего компьютера
3. Откройте `https://[ваш-ip]:3001` на мобильном устройстве
4. Примите самоподписанный сертификат в браузере

## Известные ограничения

- Камера работает только через HTTPS (кроме localhost)
- Некоторые браузеры могут иметь ограничения на доступ к камере
- Качество распознавания зависит от освещения и качества камеры
